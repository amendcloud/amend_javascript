function getEffects(e){var t="";for(var r in e)switch(""!=t&&(t+=","),r){case"brightness":t+="bright_"+e[r];break;case"contrast":t+="contrast_"+e[r]}return t}function getOverlay(e){var t="";for(var r in e)switch(""!=t&&(t+=","),r){case"image":t+="oi-"+e[r];break;case"text":t+="ot-"+e[r];break;case"size":t+="size_"+e[r];break;case"style":t+="style_"+e[r];break;case"color":t+="c_"+e[r];break;case"x":t+="x_"+e[r];break;case"y":t+="y_"+e[r]}return t}function getTransform(e){var t="";for(var r in e)switch(""!=t&&(t+=","),r){case"width":t+="w_"+e[r];break;case"height":t+="h_"+e[r];break;case"fit":t+=e[r];break;case"align":t+="align_"+e[r];break;case"x":t+="x_"+e[r];break;case"y":t+="y_"+e[r];break;case"color":t+="c_"+e[r]}return t}var Amend={FIT_XY:"fit_xy",FIT_INSIDE:"fit_inside",FIT_WIDTH:"fit_width",FIT_FILL:"fit_fill",FIT_HEIGHT:"fit_height",FIT_FACE:"fit_face",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",CENTER:"center",CENTER_TOP:"center_top",NORMAL:"normal",BOLD:"bold",ITALIC:"italic",X:"x",Y:"y",XY:"xy",MAX:"max",imgName:null,imgUrl:null,options:"",AMEND_NAME:null,ACCESS_KEY:null,ACCESS_SECRET:null,load:function(e,t){if(console.log(t),this.options="",this.imgName=e,null!=t)for(var r in t)switch(""!=this.options&&(this.options+="/"),r){case"transform":this.options+=getTransform(t[r]);break;case"quality":this.options+="quality_"+t[r];break;case"radius":this.options+="r_"+t[r];break;case"grayscale":this.options+="grayscale";break;case"invert":this.options+="invert";break;case"effect":this.options+=getEffects(t[r]);break;case"flip":this.options+="flip_"+t[r];break;case"rotate":this.options+="rotate_"+t[r];break;case"overlay":this.options+=getOverlay(t[r])}return this},fetch:function(e,t){if(this.options="",this.imgUrl=e,null!=t)for(var r in t)switch(""!=this.options&&(this.options+="/"),r){case"transform":this.options+=getTransform(t[r]);break;case"quality":this.options+="quality_"+t[r];break;case"radius":this.options+="r_"+t[r];break;case"grayscale":this.options+="grayscale";break;case"invert":this.options+="invert";break;case"effect":this.options+=getEffects(t[r]);break;case"flip":this.options+="flip_"+t[r];break;case"rotate":this.options+="rotate_"+t[r];break;case"overlay":this.options+=getOverlay(t[r])}return this},into:function(e){if(null==Amend.AMEND_NAME)return void console.error("amend name required");if(null!=Amend.imgName&&""!=Amend.imgName){var t="http://amend.cloud/"+Amend.AMEND_NAME+"/image";""!=this.options&&(t+="/"+this.options),t+="/"+this.imgName,$(e).attr("src",t)}else{var t="http://amend.cloud/"+Amend.AMEND_NAME+"/fetch/";""!=this.options&&(t+="/"+this.options),t+="/"+this.imgUrl,$(e).attr("src",t)}},upload:function(e,t){if(null==Amend.AMEND_NAME)return console.error("Amend name required"),void t({StatusCode:400,Message:"Amend name required"});if(null==Amend.ACCESS_KEY)return console.error("Amend credentials required"),void t({StatusCode:400,Message:"Amend credentials required"});var r=document.getElementById(e).files[0],n=new FileReader;n.addEventListener("load",function(){var e=$("#tbName").val(),r=n.result;r=r.split(",")[1];var a=new Object;a.ImageBase64=r,""!=e&&(a.ImageName=e),$.ajax({url:"http://amend.cloud/"+Amend.AMEND_NAME+"/upload/",type:"POST",data:a,beforeSend:function(e){e.setRequestHeader("AccessKey",Amend.ACCESS_KEY),e.setRequestHeader("AccessSecret",Amend.ACCESS_SECRET)},"content-type":"application/json",complete:function(e){t(JSON.parse(e.responseText))}})},!1),r?n.readAsDataURL(r):t({StatusCode:404,Message:"No file found"})},rename:function(e,t,r){if(null==Amend.AMEND_NAME)return console.error("Amend name required"),void r({StatusCode:400,Message:"Amend name required"});if(null==Amend.ACCESS_KEY)return console.error("Amend credentials required"),void r({StatusCode:400,Message:"Amend credentials required"});if(null==e||""==e)return console.error("image_name required"),void r({StatusCode:400,Message:"image_name required"});if(null==t||""==t)return console.error("new_image_name required"),void r({StatusCode:400,Message:"new_name required"});var n=new Object;n.ImageName=e,n.NewName=t,$.ajax({url:"http://amend.cloud/"+Amend.AMEND_NAME+"/rename/",type:"POST",data:n,beforeSend:function(e){e.setRequestHeader("AccessKey",Amend.ACCESS_KEY),e.setRequestHeader("AccessSecret",Amend.ACCESS_SECRET)},"content-type":"application/json",complete:function(e){r(JSON.parse(e.responseText))}})},destroy:function(e,t){if(null==Amend.AMEND_NAME)return console.error("Amend name required"),void t({StatusCode:400,Message:"Amend name required"});if(null==Amend.ACCESS_KEY)return console.error("Amend credentials required"),void t({StatusCode:400,Message:"Amend credentials required"});if(null==e||""==e)return console.error("image_name required"),void t({StatusCode:400,Message:"image_name required"});var r=new Object;r.ImageName=e,$.ajax({url:"http://amend.cloud/"+Amend.AMEND_NAME+"/destroy/",type:"POST",data:r,beforeSend:function(e){e.setRequestHeader("AccessKey",Amend.ACCESS_KEY),e.setRequestHeader("AccessSecret",Amend.ACCESS_SECRET)},"content-type":"application/json",complete:function(e){t(JSON.parse(e.responseText))}})},setCredentials:function(e,t){Amend.ACCESS_KEY=e,Amend.ACCESS_SECRET=t},setAmendName:function(e){Amend.AMEND_NAME=e}};