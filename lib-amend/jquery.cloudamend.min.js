function getEffects(a){var b="";for(var c in a)switch(""!=b&&(b+=","),c){case"brightness":b+="bright_"+a[c];break;case"contrast":b+="contrast_"+a[c]}return b}function getOverlay(a){var b="";for(var c in a)switch(""!=b&&(b+=","),c){case"image":b+="oi-"+a[c];break;case"text":b+="ot-"+a[c];break;case"size":b+="size_"+a[c];break;case"style":b+="style_"+a[c];break;case"color":b+="c_"+a[c];break;case"x":b+="x_"+a[c];break;case"y":b+="y_"+a[c]}return b}function getTransform(a){var b="";for(var c in a)switch(""!=b&&(b+=","),c){case"width":b+="w_"+a[c];break;case"height":b+="h_"+a[c];break;case"scale":b+=a[c];break;case"align":b+="align_"+a[c];break;case"x":b+="x_"+a[c];break;case"y":b+="y_"+a[c];break;case"color":b+="c_"+a[c]}return b}var Amend={FIT_XY:"fit_xy",FIT_INSIDE:"fit_inside",FIT_WIDTH:"fit_width",FIT_FILL:"fit_fill",FIT_HEIGHT:"fit_height",FIT_FACE:"fit_face",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",CENTER:"center",CENTER_TOP:"center_top",NORMAL:"normal",BOLD:"bold",ITALIC:"italic",X:"x",Y:"y",XY:"XY",MAX:"max",imgId:null,imgUrl:null,options:"",AMEND_NAME:null,ACCESS_KEY:null,ACCESS_SECRET:null,load:function(a,b){if(this.options="",this.imgId=a,null!=b)for(var c in b)switch(""!=this.options&&(this.options+="/"),c){case"transform":this.options+=getTransform(b[c]);break;case"quality":this.options+="quality_"+b[c];break;case"radius":this.options+="r_"+b[c];break;case"grayscale":this.options+="grayscale";break;case"invert":this.options+="invert";break;case"effect":this.options+=getEffects(b[c]);break;case"flip":this.options+="flip_"+b[c];break;case"rotate":this.options+="rotate_"+b[c];break;case"overlay":this.options+=getOverlay(b[c])}return this},fetch:function(a,b){if(this.options="",this.imgUrl=a,null!=b)for(var c in b)switch(""!=this.options&&(this.options+="/"),c){case"transform":this.options+=getTransform(b[c]);break;case"quality":this.options+="quality_"+b[c];break;case"radius":this.options+="r_"+b[c];break;case"grayscale":this.options+="grayscale";break;case"invert":this.options+="invert";break;case"effect":this.options+=getEffects(b[c]);break;case"flip":this.options+="flip_"+b[c];break;case"rotate":this.options+="rotate_"+b[c];break;case"overlay":this.options+=getOverlay(b[c])}return this},into:function(a){if(null==Amend.AMEND_NAME)return void console.error("amend name required");if(null!=Amend.imgId&&""!=Amend.imgId){var b="http://amend.cloud/"+Amend.AMEND_NAME+"/image";""!=this.options&&(b+="/"+this.options),b+="/"+this.imgId,$(a).attr("src",b)}else{var b="http://amend.cloud/"+Amend.AMEND_NAME+"/fetch/";""!=this.options&&(b+="/"+this.options),b+="/"+this.imgUrl,$(a).attr("src",b)}},upload:function(a,b){if(null==Amend.AMEND_NAME)return console.error("Amend name required"),void b({StatusCode:400,Message:"Amend name required"});if(null==Amend.ACCESS_KEY)return console.error("Amend credentials required"),void b({StatusCode:400,Message:"Amend credentials required"});var c=document.getElementById(a).files[0],d=new FileReader;d.addEventListener("load",function(){var a=$("#tbName").val(),c=d.result;c=c.split(",")[1];var e=new Object;e.ImageBase64=c,""!=a&&(e.ImageId=a),$.ajax({url:"http://amend.cloud/"+Amend.AMEND_NAME+"/upload/",type:"POST",data:e,beforeSend:function(a){a.setRequestHeader("AccessKey",Amend.ACCESS_KEY),a.setRequestHeader("AccessSecret",Amend.ACCESS_SECRET)},"content-type":"application/json",complete:function(a){b(JSON.parse(a.responseText))}})},!1),c?d.readAsDataURL(c):b({StatusCode:404,Message:"No file found"})},setCredentials:function(a,b){Amend.ACCESS_KEY=a,Amend.ACCESS_SECRET=b},setAmendName:function(a){Amend.AMEND_NAME=a}};